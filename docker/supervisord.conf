; supervisord.conf
; Configuration for running all Fractalic services:
; - backend: Main UI server (port 8000)
; - frontend: React UI (port 3000)  
; - ai_server: Fractalic AI execution server (port 8001+)
; - mcp_manager: MCP server manager (port 5859)

[supervisord]
nodaemon=true

[program:backend]
command=python -m uvicorn core.ui_server.server:app --host 0.0.0.0 --port 8000
directory=/fractalic
autostart=true
autorestart=true
stderr_logfile=/fractalic/logs/backend.err.log
stdout_logfile=/fractalic/logs/backend.out.log
user=appuser

[program:frontend]
command=npm run dev
directory=/fractalic-ui
autostart=true
autorestart=true
stderr_logfile=/fractalic/logs/frontend.err.log
stdout_logfile=/fractalic/logs/frontend.out.log
user=appuser

[program:ai_server]
command=python ai_server/fractalic_server.py
directory=/fractalic
autostart=true
autorestart=true
stderr_logfile=/fractalic/logs/ai_server.err.log
stdout_logfile=/fractalic/logs/ai_server.out.log
environment=PYTHONPATH=/fractalic
user=appuser

[program:mcp_manager]
command=python fractalic_mcp_manager.py --port 5859 serve
directory=/fractalic
autostart=true
autorestart=false
stderr_logfile=/fractalic/logs/mcp_manager.err.log
stdout_logfile=/fractalic/logs/mcp_manager.out.log
environment=PYTHONPATH=/fractalic
user=appuser
